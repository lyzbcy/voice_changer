# Voice Changer Better - å®æ—¶è¯­éŸ³å˜å£°å™¨ä¼˜åŒ–ç‰ˆ

[English](README_en.md) | [æ—¥æœ¬èª](README_ja.md) | ä¸­æ–‡

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å®æ—¶è¯­éŸ³å˜å£°å™¨é¡¹ç›®ï¼Œæ”¯æŒå¤šç§è¯­éŸ³å˜å£°æ¨¡å‹ï¼ŒåŒ…æ‹¬RVCã€SoVitsSVCã€DDSP-SVCç­‰ã€‚æœ¬é¡¹ç›®åŸºäº [w-okada/voice-changer](https://github.com/w-okada/voice-changer) è¿›è¡ŒUIç•Œé¢ä¼˜åŒ–ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

## åŸé¡¹ç›®

æœ¬é¡¹ç›®åŸºäº [w-okada/voice-changer](https://github.com/w-okada/voice-changer) å¼€å‘ï¼Œæ„Ÿè°¢åŸä½œè€…çš„ä¼˜ç§€å·¥ä½œã€‚

## UIç•Œé¢ä¼˜åŒ–å†…å®¹

### 1. æ•´ä½“å¸ƒå±€ä¼˜åŒ–
- **ç´§å‡‘åŒ–è®¾è®¡**ï¼šå‡å°‘äº†é…ç½®åŒºåŸŸçš„é—´è·å’Œå†…è¾¹è·ï¼Œä½¿ç•Œé¢æ›´åŠ ç´§å‡‘
- **ç»Ÿä¸€å®½åº¦**ï¼šæ‰€æœ‰é…ç½®å­åŒºåŸŸé‡‡ç”¨ç»Ÿä¸€çš„å¼¹æ€§å¸ƒå±€ï¼ˆ`flex: 1`ï¼‰ï¼Œç¡®ä¿è§†è§‰ä¸€è‡´æ€§
- **å“åº”å¼å¸ƒå±€**ï¼šä¼˜åŒ–äº†å„ä¸ªæ§ä»¶çš„æœ€å°å®½åº¦è®¾ç½®ï¼Œæé«˜äº†ç•Œé¢çš„å“åº”æ€§

### 2. æ§åˆ¶æŒ‰é’®ä¼˜åŒ–
- **å°ºå¯¸è°ƒæ•´**ï¼šå‡å°äº†æŒ‰é’®çš„å­—ä½“å¤§å°ã€é«˜åº¦å’Œå†…è¾¹è·ï¼Œä½¿æŒ‰é’®æ›´åŠ ç´§å‡‘
- **åœ†è§’ä¼˜åŒ–**ï¼šç»Ÿä¸€äº†æŒ‰é’®çš„åœ†è§’åŠå¾„ï¼Œæä¾›æ›´ç°ä»£çš„è§†è§‰æ•ˆæœ
- **é˜´å½±æ•ˆæœ**ï¼šä¼˜åŒ–äº†æŒ‰é’®çš„é˜´å½±æ•ˆæœï¼Œå¢å¼ºäº†è§†è§‰å±‚æ¬¡æ„Ÿ
- **å¼¹æ€§å¸ƒå±€**ï¼šæŒ‰é’®é‡‡ç”¨å¼¹æ€§å¸ƒå±€ï¼Œè‡ªåŠ¨é€‚åº”å®¹å™¨å®½åº¦

### 3. æ»‘å—æ§ä»¶ä¼˜åŒ–
- **é—´è·è°ƒæ•´**ï¼šå‡å°‘äº†æ»‘å—æ§ä»¶ä¹‹é—´çš„é—´è·ï¼Œæé«˜ç©ºé—´åˆ©ç”¨ç‡
- **å­—ä½“ä¼˜åŒ–**ï¼šè°ƒæ•´äº†æ»‘å—æ ‡ç­¾å’Œæ•°å€¼çš„å­—ä½“å¤§å°ï¼Œä¿æŒæ¸…æ™°å¯è¯»
- **å¯¹é½æ–¹å¼**ï¼šä¼˜åŒ–äº†æ»‘å—æ§ä»¶çš„å¯¹é½æ–¹å¼ï¼Œç¡®ä¿è§†è§‰æ•´é½

### 4. å™ªå£°æ§åˆ¶åŒºåŸŸä¼˜åŒ–
- **å¤é€‰æ¡†å¸ƒå±€**ï¼šä¼˜åŒ–äº†å¤é€‰æ¡†å®¹å™¨çš„é—´è·å’Œå­—ä½“å¤§å°
- **æ ‡ç­¾å¯¹é½**ï¼šæ”¹è¿›äº†æ ‡ç­¾çš„å¯¹é½æ–¹å¼ï¼Œæä¾›æ›´å¥½çš„è§†è§‰æ•ˆæœ

### 5. å­—ç¬¦åŒºåŸŸæ§åˆ¶ä¼˜åŒ–
- **æ°´å¹³å¸ƒå±€**ï¼šå°†å¢ç›Šæ§åˆ¶ç§»åŠ¨åˆ°å¼€å§‹/åœæ­¢/ç›´é€šæŒ‰é’®çš„å³ä¾§
- **ç©ºé—´èŠ‚çœ**ï¼šè¾“å…¥/è¾“å‡ºå¢ç›Šæ»‘å—æ’åˆ—åœ¨åŒä¸€è¡Œï¼ŒèŠ‚çœå‚ç›´ç©ºé—´
- **è§†è§‰å¹³è¡¡**ï¼šé€šè¿‡CSSç±» `.character-area-control-field-horizontal` å®ç°æ°´å¹³å¸ƒå±€

## æŠ€æœ¯å®ç°

### ä¸»è¦ä¿®æ”¹æ–‡ä»¶
1. **App.css** - ä¸»è¦æ ·å¼æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰UIä¼˜åŒ–çš„CSSè§„åˆ™
2. **101_CharacterArea.tsx** - å­—ç¬¦åŒºåŸŸç»„ä»¶ï¼Œå®ç°äº†å¢ç›Šæ§åˆ¶çš„å¸ƒå±€è°ƒæ•´

### å…³é”®CSSç±»
- `.config-area` - é…ç½®åŒºåŸŸä¸»å®¹å™¨
- `.config-sub-area` - é…ç½®å­åŒºåŸŸå®¹å™¨
- `.config-sub-area-buttons` - æŒ‰é’®å®¹å™¨
- `.config-sub-area-slider-control` - æ»‘å—æ§ä»¶å®¹å™¨
- `.character-area-control-field-horizontal` - å­—ç¬¦åŒºåŸŸæ°´å¹³å¸ƒå±€

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ client/demo/          # å‰ç«¯æ¼”ç¤ºåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ css/         # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ components/  # Reactç»„ä»¶
â”‚   â””â”€â”€ public/          # é™æ€èµ„æº
â”œâ”€â”€ server/              # åç«¯æœåŠ¡
â”œâ”€â”€ docker/              # Dockeré…ç½®
â””â”€â”€ trainer/             # æ¨¡å‹è®­ç»ƒç›¸å…³
```

## å¿«é€Ÿå¼€å§‹

### ğŸš€ ä¸€é”®è‡ªåŠ¨åŒ–éƒ¨ç½² (æ¨è)

ä½¿ç”¨æˆ‘ä»¬æä¾›çš„è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œä»ç¯å¢ƒé…ç½®åˆ°æœåŠ¡å¯åŠ¨çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Sakana-yuyu/voice-changer-better.git
cd voice-changer-better

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x auto_deploy.sh start_anaconda.sh start_web.sh

# Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰
./auto_deploy.sh

# æˆ– Anacondaç¯å¢ƒéƒ¨ç½²
./auto_deploy.sh --anaconda

# å¯åŠ¨Webç•Œé¢
./start_web.sh
```

### ğŸ“‹ éƒ¨ç½²æ–¹å¼é€‰æ‹©

| éƒ¨ç½²æ–¹å¼ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| **Dockeréƒ¨ç½²** | ç¯å¢ƒéš”ç¦»ã€ä¸€é”®éƒ¨ç½²ã€è·¨å¹³å° | ç”Ÿäº§ç¯å¢ƒã€å¿«é€Ÿä½“éªŒ |
| **Anacondaéƒ¨ç½²** | æ€§èƒ½æ›´å¥½ã€è°ƒè¯•æ–¹ä¾¿ã€èµ„æºå ç”¨å°‘ | å¼€å‘ç¯å¢ƒã€æ€§èƒ½è¦æ±‚é«˜ |

### ğŸ³ Docker éƒ¨ç½²

#### è‡ªåŠ¨åŒ–éƒ¨ç½²
```bash
# ä¸€é”®Dockeréƒ¨ç½²
./auto_deploy.sh
```

#### æ‰‹åŠ¨éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t voice-changer-better:latest .

# GPUç‰ˆæœ¬ï¼ˆæ¨èï¼‰
docker run -d \
  --name voice-changer-better \
  --gpus all \
  -p 6006:6006 \
  -v $(pwd)/docker_folder/model_dir:/voice-changer/server/model_dir \
  -v $(pwd)/docker_folder/pretrain:/resources \
  voice-changer-better:latest

# CPUç‰ˆæœ¬
docker run -d \
  --name voice-changer-better-cpu \
  -p 6006:6006 \
  -v $(pwd)/docker_folder/model_dir:/voice-changer/server/model_dir \
  -v $(pwd)/docker_folder/pretrain:/resources \
  voice-changer-better:latest
```

### ğŸ Anaconda éƒ¨ç½²

#### Windows è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆæ¨èï¼‰

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd voice-changer-better-main

# ä¸€é”®Anacondaéƒ¨ç½²ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
.\auto_deploy_anaconda.ps1

# å¯åŠ¨æœåŠ¡
.\start_anaconda.ps1

# æ£€æŸ¥ç¯å¢ƒ
.\start_anaconda.ps1 -CheckEnv

# å®‰è£…/æ›´æ–°ä¾èµ–
.\start_anaconda.ps1 -InstallDeps

# å¼ºåˆ¶GPUæ¨¡å¼
.\start_anaconda.ps1 -GPU

# å¼ºåˆ¶CPUæ¨¡å¼
.\start_anaconda.ps1 -CPU
```

**æ³¨æ„**: å¦‚æœPowerShellæç¤ºæ— æ³•æ‰§è¡Œè„šæœ¬ï¼Œè¯·å…ˆè¿è¡Œï¼š
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### Linux/macOS è‡ªåŠ¨åŒ–éƒ¨ç½²

```bash
# ä¸€é”®Anacondaéƒ¨ç½²
./auto_deploy.sh --anaconda
```

#### å¯åŠ¨æœåŠ¡ï¼ˆLinux/macOSï¼‰

```bash
# åŸºæœ¬å¯åŠ¨
./start_anaconda.sh

# æ£€æŸ¥ç¯å¢ƒ
./start_anaconda.sh --check-env

# å¼ºåˆ¶GPUæ¨¡å¼
./start_anaconda.sh --gpu

# å¼ºåˆ¶CPUæ¨¡å¼
./start_anaconda.sh --cpu
```

#### æ‰‹åŠ¨éƒ¨ç½²

**Windows:**
```powershell
# å®‰è£…Anacondaï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
# ä» https://www.anaconda.com/download ä¸‹è½½å¹¶å®‰è£…

# åˆ›å»ºPython 3.10ç¯å¢ƒ
conda create -n voice-changer-py310 python=3.10 -y
conda activate voice-changer-py310

# å®‰è£…ä¾èµ–
cd server
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python MMVCServerSIO.py
```

**Linux/macOS:**
```bash
# å®‰è£…Anacondaï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
wget https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh
bash Anaconda3-2023.09-0-Linux-x86_64.sh

# åˆ›å»ºPython 3.10ç¯å¢ƒ
conda create -n voice-changer-py310 python=3.10 -y
conda activate voice-changer-py310

# å®‰è£…ä¾èµ–
cd server
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python MMVCServerSIO.py
```

### ğŸŒ è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
- **å˜å£°ç•Œé¢**: http://localhost:6006
- **APIæ¥å£**: http://localhost:6006/api/hello

### ğŸ› ï¸ æœåŠ¡ç®¡ç†

#### Dockerå®¹å™¨ç®¡ç†
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep voice-changer

# æŸ¥çœ‹æ—¥å¿—
docker logs -f voice-changer-better

# åœæ­¢å®¹å™¨
docker stop voice-changer-better

# é‡å¯å®¹å™¨
docker restart voice-changer-better

# åˆ é™¤å®¹å™¨
docker rm voice-changer-better

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it voice-changer-better bash
```

#### Anacondaç¯å¢ƒç®¡ç†
```bash
# æŸ¥çœ‹ç¯å¢ƒä¿¡æ¯
./start_anaconda.sh --check-env

# æ¿€æ´»ç¯å¢ƒ
conda activate voice-changer-py310

# æ›´æ–°ä¾èµ–
./start_anaconda.sh --install-deps

# é‡æ–°åˆ›å»ºç¯å¢ƒ
conda env remove -n voice-changer-py310
./auto_deploy.sh --anaconda
```

#### å¿«é€Ÿå¯åŠ¨Webç•Œé¢
```bash
# å¯åŠ¨Webç•Œé¢ï¼ˆè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒï¼‰
./start_web.sh

# æŒ‡å®šç«¯å£å¯åŠ¨
./start_web.sh --port 8080

# å¼ºåˆ¶ä½¿ç”¨Dockeræ¨¡å¼
./start_web.sh --docker

# å¼ºåˆ¶ä½¿ç”¨Anacondaæ¨¡å¼
./start_web.sh --anaconda

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./start_web.sh --status

# åœæ­¢æœåŠ¡
./start_web.sh --stop
```

### ğŸ“ æ¨¡å‹æ–‡ä»¶ç®¡ç†

#### ç›®å½•ç»“æ„
```
# Dockeréƒ¨ç½²
docker_folder/
â”œâ”€â”€ model_dir/          # è¯­éŸ³æ¨¡å‹æ–‡ä»¶
â””â”€â”€ pretrain/           # é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶

# Anacondaéƒ¨ç½²
server/
â”œâ”€â”€ model_dir/          # è¯­éŸ³æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ pretrain/           # é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶
â””â”€â”€ tmp_dir/            # ä¸´æ—¶æ–‡ä»¶ç›®å½•
```

#### æ”¯æŒçš„æ¨¡å‹æ ¼å¼
- **è¯­éŸ³æ¨¡å‹**: `.pth`, `.onnx`, `.safetensors`
- **é¢„è®­ç»ƒæ¨¡å‹**: `.pth`, `.onnx`, `.bin`
- **é…ç½®æ–‡ä»¶**: `.json`, `.yaml`

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

#### ç¡¬ä»¶è¦æ±‚
- **CPU**: 4æ ¸å¿ƒä»¥ä¸Šï¼ˆæ¨è8æ ¸å¿ƒï¼‰
- **å†…å­˜**: 8GB RAMä»¥ä¸Šï¼ˆæ¨è16GBï¼‰
- **GPU**: NVIDIA GPUï¼ˆå¯é€‰ï¼Œæ¨è4GB+ VRAMï¼‰
- **å­˜å‚¨**: 20GBå¯ç”¨ç©ºé—´

#### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 18.04+, CentOS 7+), macOS, Windows
- **Docker**: 20.10+ (Dockeréƒ¨ç½²)
- **Python**: 3.8-3.10 (Anacondaéƒ¨ç½²)
- **CUDA**: 11.8+ (GPUåŠ é€Ÿ)
- **NVIDIA Docker**: 2.0+ (GPUç‰ˆæœ¬)

### âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

- **ç«¯å£**: é»˜è®¤ä½¿ç”¨**6006ç«¯å£**
- **GPUæ”¯æŒ**: éœ€è¦å®‰è£…NVIDIA Dockeræ”¯æŒ
- **å†…å­˜è¦æ±‚**: å»ºè®®è‡³å°‘8GB RAMï¼ŒGPUç‰ˆæœ¬éœ€è¦4GB+ VRAM
- **æ¨¡å‹æ–‡ä»¶**: é¦–æ¬¡è¿è¡Œå‰è¯·å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥å¯¹åº”ç›®å½•
- **æƒé™**: Linuxç³»ç»Ÿå¯èƒ½éœ€è¦sudoæƒé™

### ğŸ”§ æ•…éšœæ’é™¤

#### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 6006
# æˆ–ä½¿ç”¨ lsof -i :6006

# æ£€æŸ¥DockeræœåŠ¡
sudo systemctl status docker

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs voice-changer-better
# æˆ– ./start_anaconda.sh --check-env
```

#### GPUç›¸å…³é—®é¢˜
```bash
# æ£€æŸ¥NVIDIAé©±åŠ¨
nvidia-smi

# æ£€æŸ¥NVIDIA Docker
docker run --rm --gpus all nvidia/cuda:11.0-base nvidia-smi

# é‡æ–°å®‰è£…NVIDIA Docker
sudo apt-get install -y nvidia-docker2
sudo systemctl restart docker
```

#### ç¯å¢ƒé—®é¢˜
```bash
# Anacondaç¯å¢ƒé—®é¢˜
conda info --envs
conda activate voice-changer-py310

# ä¾èµ–é—®é¢˜
pip install -r server/requirements.txt --upgrade

# æƒé™é—®é¢˜
sudo chown -R $(id -u):$(id -g) docker_folder/
```

#### å¿«é€ŸéªŒè¯
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:6006/api/hello

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep voice-changer

# ä½¿ç”¨å¯åŠ¨è„šæœ¬æ£€æŸ¥
./start_web.sh --status
```

### ğŸ“š è¯¦ç»†æ–‡æ¡£

å¦‚éœ€æ›´è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—å’Œé…ç½®è¯´æ˜ï¼Œè¯·å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼š

- **[å®Œæ•´éƒ¨ç½²æŒ‡å—](LINUX_DEPLOYMENT_GUIDE.md)** - Linuxç³»ç»Ÿå®Œæ•´éƒ¨ç½²æµç¨‹
- **[Anacondaç¯å¢ƒæŒ‡å—](ANACONDA_SETUP.md)** - Anacondaç¯å¢ƒè¯¦ç»†é…ç½®
- **[Dockeré…ç½®è¯´æ˜](docker-compose.yml)** - Docker Composeé…ç½®æ–‡ä»¶
- **[å¼€å‘è€…æŒ‡å—](client/demo/README.md)** - å‰ç«¯å¼€å‘å’Œè°ƒè¯•

### ğŸ”„ å…¶ä»–éƒ¨ç½²æ–¹å¼

#### Docker Compose
```bash
# GPUç‰ˆæœ¬
docker-compose up -d

# CPUç‰ˆæœ¬
docker-compose --profile cpu up -d voice-changer-cpu
```

#### æœ¬åœ°å¼€å‘
```bash
# å‰ç«¯å¼€å‘
cd client/demo && npm install && npm start

# åç«¯æœåŠ¡
cd server && pip install -r requirements.txt && python MMVCServerSIO.py
```

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸµ **å¤šæ¨¡å‹æ”¯æŒ** - RVCã€SoVitsSVCã€DDSP-SVCç­‰å¤šç§å˜å£°æ¨¡å‹
- ğŸ”„ **å®æ—¶å¤„ç†** - ä½å»¶è¿Ÿå®æ—¶è¯­éŸ³å˜å£°
- ğŸ›ï¸ **ä¼˜åŒ–ç•Œé¢** - ç´§å‡‘åŒ–è®¾è®¡ï¼Œç°ä»£åŒ–UI
- ğŸ³ **å®¹å™¨åŒ–** - Dockerå’ŒAnacondaåŒé‡éƒ¨ç½²æ–¹æ¡ˆ
- ğŸš€ **ä¸€é”®éƒ¨ç½²** - è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå¼€ç®±å³ç”¨
- âš¡ **GPUåŠ é€Ÿ** - æ”¯æŒNVIDIA GPUåŠ é€Ÿæ¨ç†
- ğŸ“± **è·¨å¹³å°** - æ”¯æŒLinuxã€macOSã€Windows
- ğŸ› ï¸ **æ˜“ç®¡ç†** - å®Œå–„çš„æœåŠ¡ç®¡ç†å’Œç›‘æ§å·¥å…·

## è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªåŸé¡¹ç›®çš„è®¸å¯è¯æ¡æ¬¾ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (UIä¼˜åŒ–ç‰ˆ)
- å®Œæˆæ•´ä½“UIç•Œé¢çš„ç´§å‡‘åŒ–è®¾è®¡
- ä¼˜åŒ–æ§åˆ¶æŒ‰é’®å’Œæ»‘å—æ§ä»¶çš„è§†è§‰æ•ˆæœ
- å®ç°å­—ç¬¦åŒºåŸŸæ§åˆ¶çš„æ°´å¹³å¸ƒå±€
- æå‡ç”¨æˆ·ç•Œé¢çš„æ•´ä½“ä¸€è‡´æ€§å’Œç¾è§‚åº¦
